#include "timer_general.h"

// 《春日影》6/8拍 - 新符号规则版本
// 新规则：
// 八度：1h=高音, 1=中音, 1L=低音
// 时值：1_=八分, 1=基础四分, 1__=十六分, 1-=延长四分(二分)
// BPM=97, 6/8拍，基本单位为八分音符619ms

NumberedNote haruhi_no_kage_new[] = {
    // 第一行: 3h 2L 1 2L | 3h. 4 3h 2h.
    {3, 5, 0, 0, 0},     // 3h - 高音Mi，基础四分音符=1238ms
    {2, 3, 0, 1, 0},     // 2L - 低音Re，八分音符=619ms
    {1, 4, 0, 0, 0},     // 1 - 中音Do，基础四分音符=1238ms
    {2, 3, 0, 1, 0},     // 2L - 低音Re，八分音符=619ms
    {3, 5, 0, 0, 1},     // 3h. - 高音Mi附点，基础四分音符+附点=1857ms
    {4, 4, 0, 0, 0},     // 4 - 中音Fa，基础四分音符=1238ms
    {3, 5, 0, 0, 0},     // 3h - 高音Mi，基础四分音符=1238ms
    {2, 5, 0, 0, 1},     // 2h. - 高音Re附点，基础四分音符+附点=1857ms
    
    // 第二行: 3h 2L 1 2L | 3h. 4 3h 2h.
    {3, 5, 0, 0, 0},     // 3h
    {2, 3, 0, 1, 0},     // 2L
    {1, 4, 0, 0, 0},     // 1
    {2, 3, 0, 1, 0},     // 2L
    {3, 5, 0, 0, 1},     // 3h.
    {4, 4, 0, 0, 0},     // 4
    {3, 5, 0, 0, 0},     // 3h
    {2, 5, 0, 0, 1},     // 2h.
    
    // 第三行: 3h 2L 1 2L | 3h. 4 3h 2 1 2
    {3, 5, 0, 0, 0},     // 3h
    {2, 3, 0, 1, 0},     // 2L
    {1, 4, 0, 0, 0},     // 1
    {2, 3, 0, 1, 0},     // 2L
    {3, 5, 0, 0, 1},     // 3h.
    {4, 4, 0, 0, 0},     // 4
    {3, 5, 0, 0, 0},     // 3h
    {2, 4, 0, 0, 0},     // 2 (中音Re)
    {1, 4, 0, 0, 0},     // 1 (中音Do)
    {2, 4, 0, 0, 0},     // 2 (中音Re)
    
    // 第四行: 3 2 4 3 2 | 2 2 1 1 4 3 2 | 2 1 2 3h.
    {3, 4, 0, 0, 0},     // 3 (中音Mi，基础四分音符)
    {2, 4, 0, 0, 0},     // 2 (中音Re)
    {4, 4, 0, 0, 0},     // 4 (中音Fa)
    {3, 4, 0, 0, 0},     // 3 (中音Mi)
    {2, 4, 0, 0, 0},     // 2 (中音Re)
    {2, 4, 0, 0, 0},     // 2 (中音Re)
    {2, 4, 0, 0, 0},     // 2 (中音Re)
    {1, 4, 0, 0, 0},     // 1 (中音Do)
    {1, 4, 0, 0, 0},     // 1 (中音Do)
    {4, 4, 0, 0, 0},     // 4 (中音Fa)
    {3, 4, 0, 0, 0},     // 3 (中音Mi)
    {2, 4, 0, 0, 0},     // 2 (中音Re)
    {2, 4, 0, 0, 0},     // 2 (中音Re)
    {1, 4, 0, 0, 0},     // 1 (中音Do)
    {2, 4, 0, 0, 0},     // 2 (中音Re)
    {3, 5, 0, 0, 1},     // 3h. (高音Mi附点)
    
    // 第五行: 0. 3 5 1h | 7 1h 7 1h | 7L 6 5 5 2 4 | 4 3 3 5h | 4 3 2 3 5
    {0, 0, 0, 1, 1},     // 0. (休止符附点，八分音符+附点)
    {3, 4, 0, 0, 0},     // 3 (中音Mi，基础四分音符)
    {5, 4, 0, 0, 0},     // 5 (中音Sol)
    {1, 5, 0, 0, 0},     // 1h (高音Do)
    {7, 4, 0, 0, 0},     // 7 (中音Si)
    {1, 5, 0, 0, 0},     // 1h (高音Do)
    {7, 4, 0, 0, 0},     // 7 (中音Si)
    {1, 5, 0, 0, 0},     // 1h (高音Do)
    {7, 3, 0, 0, 0},     // 7L (低音Si)
    {6, 4, 0, 0, 0},     // 6 (中音La)
    {5, 4, 0, 0, 0},     // 5 (中音Sol)
    {5, 4, 0, 0, 0},     // 5 (中音Sol)
    {2, 4, 0, 0, 0},     // 2 (中音Re)
    {4, 4, 0, 0, 0},     // 4 (中音Fa)
    {4, 4, 0, 0, 0},     // 4 (中音Fa)
    {3, 4, 0, 0, 0},     // 3 (中音Mi)
    {3, 4, 0, 0, 0},     // 3 (中音Mi)
    {5, 5, 0, 0, 0},     // 5h (高音Sol)
    {4, 4, 0, 0, 0},     // 4 (中音Fa)
    {3, 4, 0, 0, 0},     // 3 (中音Mi)
    {2, 4, 0, 0, 0},     // 2 (中音Re)
    {3, 4, 0, 0, 0},     // 3 (中音Mi)
    {5, 4, 0, 0, 0},     // 5 (中音Sol)
};

// 时值符号演示
NumberedNote note_type_demo[] = {
    // 演示不同时值符号的效果（6/8拍，BPM=97）
    {1, 4, 0, 0, 0},     // 1 - 基础四分音符 = 1238ms
    {1, 4, 0, 1, 0},     // 1_ - 八分音符 = 619ms
    {1, 4, 0, 2, 0},     // 1__ - 十六分音符 = 310ms
    {1, 4, 0, 3, 0},     // 1- - 延长四分(二分)音符 = 2476ms
    {1, 4, 0, 1, 1},     // 1_. - 八分音符+附点 = 929ms
    {1, 4, 0, 0, 1},     // 1. - 基础四分音符+附点 = 1857ms
};

// 八度符号演示
NumberedNote octave_demo[] = {
    {1, 3, 0, 0, 0},     // 1L - 低音Do = 131Hz
    {1, 4, 0, 0, 0},     // 1 - 中音Do = 262Hz
    {1, 5, 0, 0, 0},     // 1h - 高音Do = 523Hz
    {1, 5, 0, 0, 1},     // 1h. - 高音Do附点 = 523Hz, 1857ms
};

// 《小星星》4/4拍 - 新符号规则
NumberedNote twinkle_star_new[] = {
    // 第一行：1 1 5 5 | 6 6 5-
    {1, 4, 0, 0, 0},     // 1 - 中音Do，基础四分音符
    {1, 4, 0, 0, 0},     // 1
    {5, 4, 0, 0, 0},     // 5
    {5, 4, 0, 0, 0},     // 5
    {6, 4, 0, 0, 0},     // 6
    {6, 4, 0, 0, 0},     // 6
    {5, 4, 0, 3, 0},     // 5- - 延长四分音符(二分音符)
    
    // 第二行：4 4 3 3 | 2 2 1-
    {4, 4, 0, 0, 0},     // 4
    {4, 4, 0, 0, 0},     // 4
    {3, 4, 0, 0, 0},     // 3
    {3, 4, 0, 0, 0},     // 3
    {2, 4, 0, 0, 0},     // 2
    {2, 4, 0, 0, 0},     // 2
    {1, 4, 0, 3, 0},     // 1- - 延长四分音符(二分音符)
};

// 播放函数
void play_haruhi_no_kage_new(void)
{
    // 使用6/8拍，BPM=97
    Play_Numbered_Melody(haruhi_no_kage_new, 
                        sizeof(haruhi_no_kage_new)/sizeof(NumberedNote), 
                        TIME_SIGNATURE_6_8, 
                        97);
}

void play_note_type_demo(void)
{
    // 演示时值符号效果
    Play_Numbered_Melody(note_type_demo, 
                        sizeof(note_type_demo)/sizeof(NumberedNote), 
                        TIME_SIGNATURE_6_8, 
                        97);
}

void play_octave_demo(void)
{
    // 演示八度符号效果
    Play_Numbered_Melody(octave_demo, 
                        sizeof(octave_demo)/sizeof(NumberedNote), 
                        TIME_SIGNATURE_6_8, 
                        97);
}

void play_twinkle_star_new(void)
{
    // 使用4/4拍，BPM=120
    Play_Numbered_Melody(twinkle_star_new, 
                        sizeof(twinkle_star_new)/sizeof(NumberedNote), 
                        TIME_SIGNATURE_4_4, 
                        120);
}